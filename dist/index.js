import{jsx as n}from"react/jsx-runtime";import{createContext as o,useMemo as c,useEffect as e,useContext as t}from"react";import r from"socket.io-client";const s=o(null),i=({children:o,socketIoConfig:t,globalEventHandlers:i})=>{const u=c((()=>r(t.uri,t.options)),[]),b=(n,o)=>(u.on(n,o),{unsubscribe:()=>{u.off(n,o)}});return e((()=>{const n=[];if(i){const o=Object.keys(i);for(const c of o){const o=i[c];n.push(b(c,o))}}return()=>{for(const o of n)o.unsubscribe()}}),[]),n(s.Provider,{value:{connect:()=>{u.connected||u.connect()},disconnect:()=>{u.disconnect()},subscribe:b,subscribeOnce:(n,o)=>{u.once(n,o)},subscribeAny:n=>(u.onAny(n),{unsubscribe:()=>{u.offAny(n)}}),emit:(n,o)=>{u.emit(n,o)}},children:o})},u=()=>t(s);export{i as SocketProvider,u as useSocketContext};
